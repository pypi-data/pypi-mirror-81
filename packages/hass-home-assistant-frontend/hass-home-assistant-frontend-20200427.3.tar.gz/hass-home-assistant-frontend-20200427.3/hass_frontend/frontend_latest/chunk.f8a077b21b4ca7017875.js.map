{"version":3,"sources":["webpack:///./src/components/ha-paper-dropdown-menu.ts","webpack:///./src/components/ha-dialog.ts","webpack:///./src/panels/config/lovelace/resources/dialog-lovelace-resource-detail.ts"],"names":["__webpack_require__","paperDropdownClass","customElements","get","define","ready","super","setTimeout","window","getComputedStyle","this","direction","style","textAlign","MwcDialog","createCloseHeading","hass","title","html","localize","_decorate","customElement","_initialize","_MwcDialog","F","[object Object]","args","d","kind","static","key","value","css","DialogLovelaceResourceDetail","_LitElement","decorators","property","async","params","_params","_error","undefined","resource","_url","url","_type","type","updateComplete","urlInvalid","trim","_close","_urlChanged","_typeChanged","_deleteResource","_submitting","_updateResource","ev","detail","item","getAttribute","values","res_type","updateResource","createResource","err","message","removeResource","haStyleDialog","LitElement"],"mappings":"uFAAAA,EAAA,KAIA,MAAMC,EAAqBC,eAAeC,IACxC,uBAsBFD,eAAeE,OAAO,yBAlBf,cAAmCH,EACjCI,QACLC,MAAMD,QAENE,WAAW,KACuC,QAA5CC,OAAOC,iBAAiBC,MAAMC,YAChCD,KAAKE,MAAMC,UAAY,UAExB,65CCVP,MAAMC,EAAYZ,eAAeC,IAAI,cAExBY,EAAqB,CAACC,EAAqBC,IAAkBC;IACtED;;iBAEaD,EAAKG,SAAS;;;;;gqMAQ/BC,CAAA,CADCC,YAAc,cACf,SAAAC,EAAAC,GAAA,OAAAC,EADA,cAAAD,EACwCE,eAAAC,GAAApB,SAAAoB,GAAAJ,EAAAZ,QAAxCiB,EAAA,EAAAC,KAAA,MAAAC,QAAA,EAAAC,IAAA,SAAAC,MACE,WACE,MAAO,CACLnB,IACAoB;;;;;;;;;;;;;;;;cAJwBlB,q9CCKvB,IAAMmB,sqMAAbb,CAAA,CADCC,YAAc,oCACf,SAAAC,EAAAY,GAAA,OAAAV,EADA,cAAAU,EAC6DT,eAAAC,GAAApB,SAAAoB,GAAAJ,EAAAZ,QAA7DiB,EAAA,EAAAC,KAAA,QAAAO,WAAA,CACGC,eADHN,IAAA,OAAAC,WAAA,IAAAH,KAAA,QAAAO,WAAA,CAGGC,eAHHN,IAAA,UAAAC,WAAA,IAAAH,KAAA,QAAAO,WAAA,CAKGC,eALHN,IAAA,OAAAC,WAAA,IAAAH,KAAA,QAAAO,WAAA,CAOGC,eAPHN,IAAA,QAAAC,WAAA,IAAAH,KAAA,QAAAO,WAAA,CASGC,eATHN,IAAA,SAAAC,WAAA,IAAAH,KAAA,QAAAO,WAAA,CAWGC,eAXHN,IAAA,cAAAC,MAAA,KAWoC,GAXpC,CAAAH,KAAA,SAAAE,IAAA,aAAAC,MAaEM,eACEC,GAEA5B,KAAK6B,QAAUD,EACf5B,KAAK8B,YAASC,EACV/B,KAAK6B,QAAQG,UACfhC,KAAKiC,KAAOjC,KAAK6B,QAAQG,SAASE,KAAO,GACzClC,KAAKmC,MAAQnC,KAAK6B,QAAQG,SAASI,MAAQ,WAE3CpC,KAAKiC,KAAO,GACZjC,KAAKmC,MAAQ,gBAETnC,KAAKqC,iBAzBf,CAAAnB,KAAA,SAAAE,IAAA,SAAAC,MA4BE,WACE,IAAKrB,KAAK6B,QACR,OAAOrB,MAET,MAAM8B,EAAkC,KAArBtC,KAAKiC,KAAKM,OAC7B,OAAO/B;;;mBAGQR,KAAKwC;;;mBAGLnC,YACTL,KAAKM,KACLN,KAAK6B,QAAQG,SACThC,KAAK6B,QAAQG,SAASE,IACtBlC,KAAKM,KAAMG,SACT;;;YAKJT,KAAK8B,OAAStB,0BAA2BR,KAAK8B,gBAAkB;;;gBAG5D9B,KAAKM,KAAMG,SACX;;cAGFT,KAAKM,KAAMG,SACX;;uBAGST,KAAKiC;+BACGjC,KAAKyC;uBACbzC,KAAKM,KAAMG,SAClB;8BAEcT,KAAKM,KAAMG,SACzB;yBAES6B;;;;;uBAKFtC,KAAKM,KAAMG,SAClB;;;;4BAKYT,KAAKmC;+BACFnC,KAAK0C;;;;oBAIhB1C,KAAKM,KAAMG,SACX;;kBAGa,OAAfT,KAAKmC,MACH3B;;0BAEMR,KAAKM,KAAMG,SACX;;sBAIN;;oBAEAT,KAAKM,KAAMG,SACX;;kBAGa,SAAfT,KAAKmC,MACH3B;;0BAEMR,KAAKM,KAAMG,SACX;;sBAIN;;;;;UAKVT,KAAK6B,QAAQG,SACXxB;;;;0BAIcR,KAAK2C;4BACH3C,KAAK4C;;kBAEf5C,KAAKM,KAAMG,SACX;;cAIND;;;oBAGQR,KAAK6C;sBACHP,GAActC,KAAK4C;;YAE7B5C,KAAK6B,QAAQG,SACXhC,KAAKM,KAAMG,SACT,oDAEFT,KAAKM,KAAMG,SACT;;;QA3IhB,CAAAS,KAAA,SAAAE,IAAA,cAAAC,MAkJE,SAAoByB,GAClB9C,KAAK8B,YAASC,EACd/B,KAAKiC,KAAOa,EAAGC,OAAO1B,QApJ1B,CAAAH,KAAA,SAAAE,IAAA,eAAAC,MAuJE,SAAqByB,GACnB9C,KAAKmC,MAAQW,EAAGC,OAAOC,KAAKC,aAAa,UAxJ7C,CAAA/B,KAAA,SAAAE,IAAA,kBAAAC,MA2JEM,iBACE3B,KAAK4C,aAAc,EACnB,IACE,MAAMM,EAAyC,CAC7ChB,IAAKlC,KAAKiC,KAAKM,OACfY,SAAUnD,KAAKmC,OAEbnC,KAAK6B,QAASG,eACVhC,KAAK6B,QAASuB,eAAeF,SAE7BlD,KAAK6B,QAASwB,eAAeH,GAErClD,KAAK6B,aAAUE,EACf,MAAOuB,GACPtD,KAAK8B,QAASwB,aAAA,EAAAA,EAAKC,UAAW,gBAZhC,QAcEvD,KAAK4C,aAAc,KA3KzB,CAAA1B,KAAA,SAAAE,IAAA,kBAAAC,MA+KEM,iBACE3B,KAAK4C,aAAc,EACnB,UACY5C,KAAK6B,QAAS2B,kBACtBxD,KAAKwC,SAFT,QAKExC,KAAK4C,aAAc,KAtLzB,CAAA1B,KAAA,SAAAE,IAAA,SAAAC,MA0LE,WACErB,KAAK6B,aAAUE,IA3LnB,CAAAb,KAAA,MAAAC,QAAA,EAAAC,IAAA,SAAAC,MA8LE,WACE,MAAO,CACLoC,IACAnC;;;;cAjM4CoC","file":"chunk.f8a077b21b4ca7017875.js","sourcesContent":["import \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport { PolymerElement } from \"@polymer/polymer\";\nimport { Constructor } from \"../types\";\n\nconst paperDropdownClass = customElements.get(\n  \"paper-dropdown-menu\"\n) as Constructor<PolymerElement>;\n\n// patches paper drop down to properly support RTL - https://github.com/PolymerElements/paper-dropdown-menu/issues/183\nexport class HaPaperDropdownClass extends paperDropdownClass {\n  public ready() {\n    super.ready();\n    // wait to check for direction since otherwise direction is wrong even though top level is RTL\n    setTimeout(() => {\n      if (window.getComputedStyle(this).direction === \"rtl\") {\n        this.style.textAlign = \"right\";\n      }\n    }, 100);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dropdown-menu\": HaPaperDropdownClass;\n  }\n}\n\ncustomElements.define(\"ha-paper-dropdown-menu\", HaPaperDropdownClass);\n","import \"@material/mwc-dialog\";\nimport type { Dialog } from \"@material/mwc-dialog\";\nimport { style } from \"@material/mwc-dialog/mwc-dialog-css\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { css, CSSResult, customElement, html } from \"lit-element\";\nimport type { Constructor, HomeAssistant } from \"../types\";\n\nconst MwcDialog = customElements.get(\"mwc-dialog\") as Constructor<Dialog>;\n\nexport const createCloseHeading = (hass: HomeAssistant, title: string) => html`\n  ${title}\n  <paper-icon-button\n    aria-label=${hass.localize(\"ui.dialogs.generic.close\")}\n    icon=\"hass:close\"\n    dialogAction=\"close\"\n    class=\"close_button\"\n  ></paper-icon-button>\n`;\n\n@customElement(\"ha-dialog\")\nexport class HaDialog extends MwcDialog {\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        .mdc-dialog__actions {\n          justify-content: var(--justify-action-buttons, flex-end);\n        }\n        .mdc-dialog__container {\n          align-items: var(--vertial-align-dialog, center);\n        }\n        .mdc-dialog__title::before {\n          display: block;\n          height: 20px;\n        }\n        .close_button {\n          position: absolute;\n          right: 16px;\n          top: 12px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-dialog\": HaDialog;\n  }\n}\n","import \"@material/mwc-button/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { createCloseHeading } from \"../../../../components/ha-dialog\";\nimport \"../../../../components/ha-paper-dropdown-menu\";\nimport {\n  LovelaceResource,\n  LovelaceResourcesMutableParams,\n} from \"../../../../data/lovelace\";\nimport { PolymerChangedEvent } from \"../../../../polymer-types\";\nimport { haStyleDialog } from \"../../../../resources/styles\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { LovelaceResourceDetailsDialogParams } from \"./show-dialog-lovelace-resource-detail\";\n\n@customElement(\"dialog-lovelace-resource-detail\")\nexport class DialogLovelaceResourceDetail extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() private _params?: LovelaceResourceDetailsDialogParams;\n\n  @property() private _url!: LovelaceResource[\"url\"];\n\n  @property() private _type!: LovelaceResource[\"type\"];\n\n  @property() private _error?: string;\n\n  @property() private _submitting = false;\n\n  public async showDialog(\n    params: LovelaceResourceDetailsDialogParams\n  ): Promise<void> {\n    this._params = params;\n    this._error = undefined;\n    if (this._params.resource) {\n      this._url = this._params.resource.url || \"\";\n      this._type = this._params.resource.type || \"module\";\n    } else {\n      this._url = \"\";\n      this._type = \"module\";\n    }\n    await this.updateComplete;\n  }\n\n  protected render(): TemplateResult {\n    if (!this._params) {\n      return html``;\n    }\n    const urlInvalid = this._url.trim() === \"\";\n    return html`\n      <ha-dialog\n        open\n        @closing=${this._close}\n        scrimClickAction\n        escapeKeyAction\n        .heading=${createCloseHeading(\n          this.hass,\n          this._params.resource\n            ? this._params.resource.url\n            : this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.new_resource\"\n              )\n        )}\n      >\n        <div>\n          ${this._error ? html` <div class=\"error\">${this._error}</div> ` : \"\"}\n          <div class=\"form\">\n            <h3 class=\"warning\">\n              ${this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.warning_header\"\n              )}\n            </h3>\n            ${this.hass!.localize(\n              \"ui.panel.config.lovelace.resources.detail.warning_text\"\n            )}\n            <paper-input\n              .value=${this._url}\n              @value-changed=${this._urlChanged}\n              .label=${this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.url\"\n              )}\n              .errorMessage=${this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.url_error_msg\"\n              )}\n              .invalid=${urlInvalid}\n              dialogInitialFocus\n            ></paper-input>\n            <br />\n            <ha-paper-dropdown-menu\n              .label=${this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.type\"\n              )}\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                .selected=${this._type}\n                @iron-select=${this._typeChanged}\n                attr-for-selected=\"type\"\n              >\n                <paper-item type=\"module\">\n                  ${this.hass!.localize(\n                    \"ui.panel.config.lovelace.resources.types.module\"\n                  )}\n                </paper-item>\n                ${this._type === \"js\"\n                  ? html`\n                      <paper-item type=\"js\">\n                        ${this.hass!.localize(\n                          \"ui.panel.config.lovelace.resources.types.js\"\n                        )}\n                      </paper-item>\n                    `\n                  : \"\"}\n                <paper-item type=\"css\">\n                  ${this.hass!.localize(\n                    \"ui.panel.config.lovelace.resources.types.css\"\n                  )}\n                </paper-item>\n                ${this._type === \"html\"\n                  ? html`\n                      <paper-item type=\"html\">\n                        ${this.hass!.localize(\n                          \"ui.panel.config.lovelace.resources.types.html\"\n                        )}\n                      </paper-item>\n                    `\n                  : \"\"}\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </div>\n        ${this._params.resource\n          ? html`\n              <mwc-button\n                slot=\"secondaryAction\"\n                class=\"warning\"\n                @click=\"${this._deleteResource}\"\n                .disabled=${this._submitting}\n              >\n                ${this.hass!.localize(\n                  \"ui.panel.config.lovelace.resources.detail.delete\"\n                )}\n              </mwc-button>\n            `\n          : html``}\n        <mwc-button\n          slot=\"primaryAction\"\n          @click=\"${this._updateResource}\"\n          .disabled=${urlInvalid || this._submitting}\n        >\n          ${this._params.resource\n            ? this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.update\"\n              )\n            : this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.create\"\n              )}\n        </mwc-button>\n      </ha-dialog>\n    `;\n  }\n\n  private _urlChanged(ev: PolymerChangedEvent<string>) {\n    this._error = undefined;\n    this._url = ev.detail.value;\n  }\n\n  private _typeChanged(ev: CustomEvent) {\n    this._type = ev.detail.item.getAttribute(\"type\");\n  }\n\n  private async _updateResource() {\n    this._submitting = true;\n    try {\n      const values: LovelaceResourcesMutableParams = {\n        url: this._url.trim(),\n        res_type: this._type,\n      };\n      if (this._params!.resource) {\n        await this._params!.updateResource(values);\n      } else {\n        await this._params!.createResource(values);\n      }\n      this._params = undefined;\n    } catch (err) {\n      this._error = err?.message || \"Unknown error\";\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private async _deleteResource() {\n    this._submitting = true;\n    try {\n      if (await this._params!.removeResource()) {\n        this._close();\n      }\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private _close(): void {\n    this._params = undefined;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyleDialog,\n      css`\n        .warning {\n          color: var(--error-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-lovelace-resource-detail\": DialogLovelaceResourceDetail;\n  }\n}\n"],"sourceRoot":""}
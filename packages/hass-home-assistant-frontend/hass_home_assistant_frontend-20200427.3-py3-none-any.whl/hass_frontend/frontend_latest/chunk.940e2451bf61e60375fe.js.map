{"version":3,"sources":["webpack:///./src/data/climate.ts","webpack:///./src/components/ha-climate-state.js","webpack:///./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts"],"names":["__webpack_require__","d","__webpack_exports__","CLIMATE_PRESET_NONE","CLIMATE_SUPPORT_TARGET_TEMPERATURE","CLIMATE_SUPPORT_TARGET_TEMPERATURE_RANGE","CLIMATE_SUPPORT_TARGET_HUMIDITY","CLIMATE_SUPPORT_FAN_MODE","CLIMATE_SUPPORT_PRESET_MODE","CLIMATE_SUPPORT_SWING_MODE","CLIMATE_SUPPORT_AUX_HEAT","compareClimateHvacModes","hvacModeOrdering","auto","heat_cool","heat","cool","dry","fan_only","off","mode1","mode2","_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__","_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__","_data_climate__WEBPACK_IMPORTED_MODULE_2__","_mixins_localize_mixin__WEBPACK_IMPORTED_MODULE_3__","customElements","define","LocalizeMixin","PolymerElement","template","html","properties","hass","Object","stateObj","currentStatus","type","String","computed","computeCurrentStatus","attributes","current_temperature","config","unit_system","temperature","current_humidity","computeTarget","target_temp_low","target_temp_high","target_humidity_low","target_humidity_high","humidity","_hasKnownState","state","_localizeState","localize","stateString","hvac_action","_localizePreset","preset","_renderPreset","preset_mode","customElement","_LitElement","[object Object]","args","super","_initialize","this","property","entity","Error","_config","changedProps","hasConfigOrEntityChanged","states","css","LitElement"],"mappings":"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","file":"chunk.940e2451bf61e60375fe.js","sourcesContent":["import {\n  HassEntityAttributeBase,\n  HassEntityBase,\n} from \"home-assistant-js-websocket\";\n\nexport type HvacMode =\n  | \"off\"\n  | \"heat\"\n  | \"cool\"\n  | \"heat_cool\"\n  | \"auto\"\n  | \"dry\"\n  | \"fan_only\";\n\nexport const CLIMATE_PRESET_NONE = \"none\";\n\nexport type HvacAction = \"off\" | \"heating\" | \"cooling\" | \"drying\" | \"idle\";\n\nexport type ClimateEntity = HassEntityBase & {\n  attributes: HassEntityAttributeBase & {\n    hvac_mode: HvacMode;\n    hvac_modes: HvacMode[];\n    hvac_action?: HvacAction;\n    current_temperature: number;\n    min_temp: number;\n    max_temp: number;\n    temperature: number;\n    target_temp_step?: number;\n    target_temp_high?: number;\n    target_temp_low?: number;\n    humidity?: number;\n    current_humidity?: number;\n    target_humidity_low?: number;\n    target_humidity_high?: number;\n    min_humidity?: number;\n    max_humidity?: number;\n    fan_mode?: string;\n    fan_modes?: string[];\n    preset_mode?: string;\n    preset_modes?: string[];\n    swing_mode?: string;\n    swing_modes?: string[];\n    aux_heat?: \"on\" | \"off\";\n  };\n};\n\nexport const CLIMATE_SUPPORT_TARGET_TEMPERATURE = 1;\nexport const CLIMATE_SUPPORT_TARGET_TEMPERATURE_RANGE = 2;\nexport const CLIMATE_SUPPORT_TARGET_HUMIDITY = 4;\nexport const CLIMATE_SUPPORT_FAN_MODE = 8;\nexport const CLIMATE_SUPPORT_PRESET_MODE = 16;\nexport const CLIMATE_SUPPORT_SWING_MODE = 32;\nexport const CLIMATE_SUPPORT_AUX_HEAT = 64;\n\nconst hvacModeOrdering: { [key in HvacMode]: number } = {\n  auto: 1,\n  heat_cool: 2,\n  heat: 3,\n  cool: 4,\n  dry: 5,\n  fan_only: 6,\n  off: 7,\n};\n\nexport const compareClimateHvacModes = (mode1: HvacMode, mode2: HvacMode) =>\n  hvacModeOrdering[mode1] - hvacModeOrdering[mode2];\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { CLIMATE_PRESET_NONE } from \"../data/climate\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaClimateState extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          white-space: nowrap;\n        }\n\n        .target {\n          color: var(--primary-text-color);\n        }\n\n        .current {\n          color: var(--secondary-text-color);\n        }\n\n        .state-label {\n          font-weight: bold;\n          text-transform: capitalize;\n        }\n\n        .unit {\n          display: inline-block;\n          direction: ltr;\n        }\n      </style>\n\n      <div class=\"target\">\n        <template is=\"dom-if\" if=\"[[_hasKnownState(stateObj.state)]]\">\n          <span class=\"state-label\">\n            [[_localizeState(localize, stateObj)]]\n            <template is=\"dom-if\" if=\"[[_renderPreset(stateObj.attributes)]]\">\n              - [[_localizePreset(localize, stateObj.attributes.preset_mode)]]\n            </template>\n          </span>\n        </template>\n        <div class=\"unit\">[[computeTarget(hass, stateObj)]]</div>\n      </div>\n\n      <template is=\"dom-if\" if=\"[[currentStatus]]\">\n        <div class=\"current\">\n          [[localize('ui.card.climate.currently')]]:\n          <div class=\"unit\">[[currentStatus]]</div>\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      currentStatus: {\n        type: String,\n        computed: \"computeCurrentStatus(hass, stateObj)\",\n      },\n    };\n  }\n\n  computeCurrentStatus(hass, stateObj) {\n    if (!hass || !stateObj) return null;\n    if (stateObj.attributes.current_temperature != null) {\n      return `${stateObj.attributes.current_temperature} ${hass.config.unit_system.temperature}`;\n    }\n    if (stateObj.attributes.current_humidity != null) {\n      return `${stateObj.attributes.current_humidity} %`;\n    }\n    return null;\n  }\n\n  computeTarget(hass, stateObj) {\n    if (!hass || !stateObj) return null;\n    // We're using \"!= null\" on purpose so that we match both null and undefined.\n    if (\n      stateObj.attributes.target_temp_low != null &&\n      stateObj.attributes.target_temp_high != null\n    ) {\n      return `${stateObj.attributes.target_temp_low}-${stateObj.attributes.target_temp_high} ${hass.config.unit_system.temperature}`;\n    }\n    if (stateObj.attributes.temperature != null) {\n      return `${stateObj.attributes.temperature} ${hass.config.unit_system.temperature}`;\n    }\n    if (\n      stateObj.attributes.target_humidity_low != null &&\n      stateObj.attributes.target_humidity_high != null\n    ) {\n      return `${stateObj.attributes.target_humidity_low}-${stateObj.attributes.target_humidity_high}%`;\n    }\n    if (stateObj.attributes.humidity != null) {\n      return `${stateObj.attributes.humidity} %`;\n    }\n\n    return \"\";\n  }\n\n  _hasKnownState(state) {\n    return state !== \"unknown\";\n  }\n\n  _localizeState(localize, stateObj) {\n    const stateString = localize(`component.climate.state._.${stateObj.state}`);\n    return stateObj.attributes.hvac_action\n      ? `${localize(\n          `state_attributes.climate.hvac_action.${stateObj.attributes.hvac_action}`\n        )} (${stateString})`\n      : stateString;\n  }\n\n  _localizePreset(localize, preset) {\n    return localize(`state_attributes.climate.preset_mode.${preset}`) || preset;\n  }\n\n  _renderPreset(attributes) {\n    return (\n      attributes.preset_mode && attributes.preset_mode !== CLIMATE_PRESET_NONE\n    );\n  }\n}\ncustomElements.define(\"ha-climate-state\", HaClimateState);\n","import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  PropertyValues,\n  TemplateResult,\n} from \"lit-element\";\nimport \"../../../components/ha-climate-state\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\nimport { EntityConfig, LovelaceRow } from \"./types\";\n\n@customElement(\"hui-climate-entity-row\")\nclass HuiClimateEntityRow extends LitElement implements LovelaceRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=${this.hass} .config=${this._config}>\n        <ha-climate-state\n          .hass=${this.hass}\n          .stateObj=${stateObj}\n        ></ha-climate-state>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-climate-state {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-climate-entity-row\": HuiClimateEntityRow;\n  }\n}\n"],"sourceRoot":""}
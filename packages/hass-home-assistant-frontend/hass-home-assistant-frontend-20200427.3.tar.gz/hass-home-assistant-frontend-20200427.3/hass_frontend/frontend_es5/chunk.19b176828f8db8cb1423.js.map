{"version":3,"sources":["webpack:///./src/panels/lovelace/common/compute-tooltip.ts","webpack:///./src/panels/lovelace/components/hui-buttons-base.ts","webpack:///./src/panels/lovelace/header-footer/hui-buttons-header-footer.ts"],"names":["__webpack_require__","d","__webpack_exports__","computeTooltip","_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_0__","computeActionTooltip","hass","state","config","isHold","action","tooltip","localize","concat","navigation_path","url_path","service","title","stateName","entity","states","computeStateName","tap_action","hold_action","tapTooltip","holdTooltip","_decorate","customElement","_initialize","_LitElement","F","_LitElement2","_inherits","HuiButtonsBase","_super","_createSuper","_this","_classCallCheck","this","_len","arguments","length","args","Array","_key","call","apply","_assertThisInitialized","kind","decorators","property","key","value","queryAll","_this$configEntities","_hass","entitiesShowingIcons","configEntities","filter","show_icon","_badges","forEach","badge","index","stateObj","_this2","html","_templateObject","map","entityConf","_templateObject3","_handleAction","actionHandler","hasHold","hasAction","hasDoubleClick","double_tap_action","_templateObject4","icon","image","show_name","name","_templateObject2","ev","currentTarget","handleAction","Object","assign","detail","static","css","_templateObject5","LitElement","HuiButtonsHeaderFooter","entities","_configEntities","processConfigEntities","requestUpdate"],"mappings":"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","file":"chunk.19b176828f8db8cb1423.js","sourcesContent":["import { computeStateName } from \"../../../common/entity/compute_state_name\";\nimport { ActionConfig } from \"../../../data/lovelace\";\nimport { HomeAssistant } from \"../../../types\";\n\ninterface Config {\n  entity?: string;\n  title?: string;\n  tap_action?: ActionConfig;\n  hold_action?: ActionConfig;\n  double_tap_action?: ActionConfig;\n}\n\nfunction computeActionTooltip(\n  hass: HomeAssistant,\n  state: string,\n  config: ActionConfig,\n  isHold: boolean\n) {\n  if (!config || !config.action || config.action === \"none\") {\n    return \"\";\n  }\n\n  let tooltip =\n    (isHold\n      ? hass.localize(\"ui.panel.lovelace.cards.picture-elements.hold\")\n      : hass.localize(\"ui.panel.lovelace.cards.picture-elements.tap\")) + \" \";\n\n  switch (config.action) {\n    case \"navigate\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.navigate_to\",\n        \"location\",\n        config.navigation_path\n      )}`;\n      break;\n    case \"url\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.url\",\n        \"url_path\",\n        config.url_path\n      )}`;\n      break;\n    case \"toggle\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.toggle\",\n        \"name\",\n        state\n      )}`;\n      break;\n    case \"call-service\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.call_service\",\n        \"name\",\n        config.service\n      )}`;\n      break;\n    case \"more-info\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.more_info\",\n        \"name\",\n        state\n      )}`;\n      break;\n  }\n\n  return tooltip;\n}\n\nexport const computeTooltip = (hass: HomeAssistant, config: Config): string => {\n  if (config.title === null) {\n    return \"\";\n  }\n\n  if (config.title) {\n    return config.title;\n  }\n\n  let stateName = \"\";\n  let tooltip = \"\";\n\n  if (config.entity) {\n    stateName =\n      config.entity in hass.states\n        ? computeStateName(hass.states[config.entity])\n        : config.entity;\n  }\n\n  if (!config.tap_action && !config.hold_action) {\n    return stateName;\n  }\n\n  const tapTooltip = config.tap_action\n    ? computeActionTooltip(hass, stateName, config.tap_action, false)\n    : \"\";\n  const holdTooltip = config.hold_action\n    ? computeActionTooltip(hass, stateName, config.hold_action, true)\n    : \"\";\n\n  const newline = tapTooltip && holdTooltip ? \"\\n\" : \"\";\n\n  tooltip = tapTooltip + newline + holdTooltip;\n\n  return tooltip;\n};\n","import \"@material/mwc-ripple\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  queryAll,\n  TemplateResult,\n} from \"lit-element\";\nimport { computeStateName } from \"../../../common/entity/compute_state_name\";\nimport \"../../../components/entity/state-badge\";\nimport type { StateBadge } from \"../../../components/entity/state-badge\";\nimport \"../../../components/ha-icon\";\nimport type { ActionHandlerEvent } from \"../../../data/lovelace\";\nimport type { HomeAssistant } from \"../../../types\";\nimport type { EntitiesCardEntityConfig } from \"../cards/types\";\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { actionHandler } from \"../common/directives/action-handler-directive\";\nimport { handleAction } from \"../common/handle-action\";\nimport { hasAction } from \"../common/has-action\";\n\n@customElement(\"hui-buttons-base\")\nexport class HuiButtonsBase extends LitElement {\n  @property() public configEntities?: EntitiesCardEntityConfig[];\n\n  @queryAll(\"state-badge\") protected _badges!: StateBadge[];\n\n  private _hass?: HomeAssistant;\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n    const entitiesShowingIcons = this.configEntities?.filter(\n      (entity) => entity.show_icon !== false\n    );\n    this._badges.forEach((badge, index: number) => {\n      badge.hass = hass;\n      badge.stateObj = hass.states[entitiesShowingIcons![index].entity];\n    });\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      ${(this.configEntities || []).map((entityConf) => {\n        const stateObj = this._hass!.states[entityConf.entity];\n        if (!stateObj) {\n          return html`<div class='missing'><iron-icon icon=\"hass:alert\"></div>`;\n        }\n\n        return html`\n          <div\n            @action=${this._handleAction}\n            .actionHandler=${actionHandler({\n              hasHold: hasAction(entityConf.hold_action),\n              hasDoubleClick: hasAction(entityConf.double_tap_action),\n            })}\n            .config=${entityConf}\n            tabindex=\"0\"\n          >\n            ${entityConf.show_icon !== false\n              ? html`\n                  <state-badge\n                    title=${computeTooltip(this._hass!, entityConf)}\n                    .hass=${this._hass}\n                    .stateObj=${stateObj}\n                    .overrideIcon=${entityConf.icon}\n                    .overrideImage=${entityConf.image}\n                    stateColor\n                  ></state-badge>\n                `\n              : \"\"}\n            <span>\n              ${entityConf.show_name ||\n              (entityConf.name && entityConf.show_name !== false)\n                ? entityConf.name || computeStateName(stateObj)\n                : \"\"}\n            </span>\n            <mwc-ripple unbounded></mwc-ripple>\n          </div>\n        `;\n      })}\n    `;\n  }\n\n  private _handleAction(ev: ActionHandlerEvent) {\n    const config = (ev.currentTarget as any).config as EntitiesCardEntityConfig;\n    handleAction(\n      this,\n      this._hass!,\n      { tap_action: { action: \"toggle\" }, ...config },\n      ev.detail.action!\n    );\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        justify-content: space-evenly;\n      }\n      .missing {\n        color: #fce588;\n      }\n      div {\n        cursor: pointer;\n        align-items: center;\n        display: inline-flex;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-buttons-base\": HuiButtonsBase;\n  }\n}\n","import {\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../../types\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport \"../components/hui-buttons-base\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { LovelaceHeaderFooter } from \"../types\";\nimport { ButtonsHeaderFooterConfig } from \"./types\";\n\n@customElement(\"hui-buttons-header-footer\")\nexport class HuiButtonsHeaderFooter extends LitElement\n  implements LovelaceHeaderFooter {\n  public static getStubConfig(): object {\n    return { entities: [] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  private _configEntities?: EntityConfig[];\n\n  public setConfig(config: ButtonsHeaderFooterConfig): void {\n    this._configEntities = processConfigEntities(config.entities);\n    this.requestUpdate();\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      <hui-buttons-base\n        .hass=${this.hass}\n        .configEntities=${this._configEntities}\n      ></hui-buttons-base>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-buttons-header-footer\": HuiButtonsHeaderFooter;\n  }\n}\n"],"sourceRoot":""}
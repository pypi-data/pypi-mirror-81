(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[29],{2212:function(e,t,a){},2252:function(e,t,a){"use strict";a.r(t);var r=a(4),n=a(198),s=a(5),l=a(16),o=a(17),c=a(128),i=a.n(c),d=a(2235),p=a(63),u=a(36),m=a(0),g=a.n(m),v=a(18),E=a(2218),f=a(10),C=(a(2212),function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var l;return Object(s.a)(this,a),(l=t.call(this,e)).currentUploadCanceller=void 0,l.componentDidUpdate=function(e){e.disabled!==l.props.disabled&&l.props.disabled&&l.reset()},l.dropHandler=function(e,t,a){var r=l.props.element.get("maxUploadSizeMb");if(t.length>0){var s="".concat(t[0].type," files are not allowed");l.setState({status:"ERROR",errorMessage:s})}else{var o,c=1024*r*1024,d=Object(n.a)(e);try{for(d.s();!(o=d.n()).done;){if(o.value.size>c){var p="The max file size allowed is ".concat(r,"MB");return void l.setState({status:"ERROR",errorMessage:p})}}}catch(u){d.e(u)}finally{d.f()}l.setState({acceptedFiles:e,status:"UPLOADING"}),l.currentUploadCanceller=i.a.CancelToken.source(),l.props.uploadClient.uploadFiles(l.props.element.get("id"),e,void 0,l.currentUploadCanceller.token).then((function(){l.currentUploadCanceller=void 0,l.setState({status:"UPLOADED"})})).catch((function(e){i.a.isCancel(e)?(l.currentUploadCanceller=void 0,l.setState({status:"UPLOADED"})):l.setState({status:"ERROR",errorMessage:e?e.toString():"Unknown error"})}))}},l.reset=function(){l.setState({status:"READY",errorMessage:void 0,acceptedFiles:[]})},l.renderErrorMessage=function(){var e=l.state.errorMessage;return g.a.createElement("div",{className:"uploadStatus uploadError"},g.a.createElement("span",{className:"body"},g.a.createElement(p.a,{className:"icon",type:"warning"})," ",e),g.a.createElement(v.c,{kind:v.a.LINK,onClick:l.reset},"OK"))},l.renderUploadingMessage=function(){return g.a.createElement("div",{className:"uploadStatus uploadProgress"},g.a.createElement("span",{className:"body"},g.a.createElement(E.a,{size:f.a["$file-uploader-spinner-size"],color:f.a.$secondary,overrides:{Svg:{style:{verticalAlign:"baseline",marginRight:"0.375rem"}}}}),g.a.createElement("span",null,"Uploading...")),g.a.createElement(v.c,{kind:v.a.LINK,onClick:l.cancelCurrentUpload},"Cancel"))},l.cancelCurrentUpload=function(){null!=l.currentUploadCanceller&&(l.currentUploadCanceller.cancel(),l.currentUploadCanceller=void 0)},l.renderFileUploader=function(){var e=l.state,t=e.status,a=e.errorMessage,n=l.props.element,s=n.get("type").toArray().map((function(e){return".".concat(e)})),o=n.get("multipleFiles"),c=u.d,i="";return"UPLOADED"===t&&((c=Object(r.a)({},c)).ContentMessage=Object(r.a)({},c.ContentMessage),c.ContentMessage.style=Object(r.a)({},c.ContentMessage.style),c.ContentMessage.style.visibility="hidden",c.ContentMessage.style.overflow="hidden",c.ContentMessage.style.height="0.625rem",c.ContentSeparator=Object(r.a)({},c.ContentSeparator),c.ContentSeparator.style.visibility="hidden",i=o?l.state.acceptedFiles.map((function(e){return e.name})).join(", "):l.state.acceptedFiles[0].name),g.a.createElement(g.a.Fragment,null,"UPLOADED"===t&&g.a.createElement("div",{className:"uploadOverlay uploadDone"},g.a.createElement("span",{className:"body"},i)),g.a.createElement(d.a,{onDrop:l.dropHandler,errorMessage:a,accept:0===s.length?void 0:s,disabled:l.props.disabled,overrides:c,multiple:o}))},l.render=function(){var e,t=l.state.status,a=l.props.element.get("label");return e="ERROR"===t?l.renderErrorMessage:"UPLOADING"===t?l.renderUploadingMessage:l.renderFileUploader,g.a.createElement("div",{className:"Widget stFileUploader"},g.a.createElement("label",null,a),e())},l.state={status:"READY",errorMessage:void 0,acceptedFiles:[]},l}return a}(g.a.PureComponent));a.d(t,"default",(function(){return C}))}}]);
//# sourceMappingURL=29.2550062f.chunk.js.map
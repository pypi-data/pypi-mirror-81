# -*- coding: utf-8 -*-
from setuptools import setup

packages = \
['basedosdados']

package_data = \
{'': ['*'],
 'basedosdados': ['configs/*',
                  'configs/templates/dataset/*',
                  'configs/templates/table/*']}

install_requires = \
['Jinja2==2.11.2',
 'click==7.1.2',
 'google-cloud-bigquery==1.28.0',
 'google-cloud-storage==1.31.2',
 'pandas-gbq==0.13.2',
 'pyaml==20.4.0',
 'tomlkit==0.7.0']

entry_points = \
{'console_scripts': ['basedosdados = basedosdados.cli:cli']}

setup_kwargs = {
    'name': 'basedosdados',
    'version': '0.1.2',
    'description': 'Organizar e facilitar o acesso a dados brasileiros atrav√©s de tabelas p√∫blicas no BigQuery.',
    'long_description': '# A Base dos Dados  üóÇÔ∏è\n\nO intuito do projeto √© organizar e facilitar o acesso a dados brasileiros atrav√©s de tabelas p√∫blicas no BigQuery.\nQualquer pessoa poder√° fazer queries em bases tratadas e documentadas que estar√£o dispon√≠veis e est√°veis.\n\nUma simples consulta de SQL ser√° o suficiente para cruzamento de bases que voc√™ desejar. Sem precisar procurar, baixar, tratar, comprar um servidor e subir clusters.\n\n**Incentivamos que outras institui√ß√µes e pessoas contribuam**. S√≥ √© requerido que o processo de captura e tratamento sejam p√∫blicos e documentados, e a inser√ß√£o dos dados no BigQuery siga nossa metodologia descrita abaixo.\n\n#### Porque o BigQuery?\n\nSabemos que estruturar os dados em uma plataforma privada n√£o √© o ideal para um projeto de dados abertos. Por√©m o BigQuery oferece uma infraestrutura com algumas vantagens:\n\n- √â poss√≠vel deixar os dados p√∫blicos, i.e., qualquer pessoa com uma conta no Google Cloud pode fazer uma query na base, quando quiser\n- O usu√°rio (quem faz a query) paga por ela. Isso deixa os custos do projeto bem baixos\n- O BigQuery escala magicamente para hexabytes se necess√°rio\n- O custo √© praticamente zero para usu√°rios. S√£o cobrados somente 5 d√≥lares por terabyte de dados que sua query percorrer, e os primeiros 5 terabytes s√£o gratuitos.\n\n#### Instale o CLI localmente\n\n```sh\nmake create-env\n. .bases/bin/activate\n```\n\n# Como organizar as bases no BigQuery?\n\nAs bases tem que ser organizadas no BigQuery de maneira consistente, que permita uma busca f√°cil e intuitiva, e seja escal√°vel.\n\nPara isso, existem dois n√≠veis de organiza√ß√£o: _datasets_ e _tables_, nos quais:\n- Todas as tabelas devem estar organizadas em _datasets_\n- Cada tabela deve pertencer a um √∫nico _dataset_\n\nAs diretrizes para nomenclatura dos _datasets_ e tabelas s√£o descritas abaixo:\n\n|           | Dataset                      | Tabela                           |\n|-----------|-----------------------------|----------------------------------|\n| Mundial   | mundo_\\<tema\\>_\\<instituicao\\>      | \\<descri√ß√£o\\>                        |\n| Federal   | \\<pais\\> _ \\<tema\\> _ \\<instituicao\\>       | \\<descri√ß√£o\\>                       |\n| Estadual  | \\<pais\\> _ \\<estado\\> _ \\<tema\\> _ \\<instituicao\\>     | \\<descri√ß√£o\\>       |\n| Municipal | \\<pais\\> _ \\<estado\\> _ \\<cidade\\> _ \\<tema\\> _ \\<instituicao\\> | \\<descri√ß√£o\\>       |\n\n- Utilizar somente letras min√∫sculas\n- Remover acentos, pontua√ß√µes e espa√ßos\n\n### Bases Desejadas\n\n[Lista de bases mapeadas](https://docs.google.com/spreadsheets/d/1t9kEsiyatmmdDCy2qjaCjLqdw-oJj33P7tY5bnkR0aw/edit#gid=0) que est√£o no nosso mapa.\n\n\n## Mundial -- Clima, Waze\n\n### Dataset:\n\nUsar abrang√™ncia, um tema e nome da institui√ß√£o\n\n`mundo_<tema>_<instituicao>`\n\n### Tabela:\n\nUsar nome descritivo e √∫nico para os dados\n\n`<descri√ß√£o>`\n\nExemplo: Os dados de alertas do Waze estariam no dataset `mundo_mobilidade_waze` e tabela `alertas`. Portanto, o caminho seria `mundo_mobilidade_waze`.`alertas`.\n\n## Federal -- IBGE, IPEA, Senado, Camara, TSE\n\n### Dataset:\n\nUsar sigla do pa√≠s, um tema e nome da institui√ß√£o\n\n`<pais>_<tema>_<instituicao>`\n\n### Tabela:\n\nUsar nome descritivo e √∫nico para os dados:\n\n`<descri√ß√£o>`\n\nExemplo: Os dados de candidatos do TSE estariam no dataset `br-eleicoes-tse` e na tabela `candidatos`.\n\n## Estadual \n\n### Dataset:\n\nUsar pa√≠s e sigla do estado (UF).\n\n`<pais>_<estado>`\n\n### Tabela:\n\nUsar nome da instui√ß√£o estadual, tema e descri√ß√£o\n\n`<instituicao>_<tema>_<descri√ß√£o>`\n\n\nExemplo: Os dados da rede de esgoto da SANASA que atende no estado de S√£o Paulo estariam no dataset `br-sp` e tabela `sanasa-sanementobasico-redeesgoto`.\n\n## Municipal\n\n### Dataset:\n\nUsar sigla do pa√≠s, sigla do estado (UF), nome da cidade (sem espa√ßo)\n\n`<pais>_<estado>_<cidade>`\n\n### Tabela:\n\nUsar nome da instui√ß√£o estadual, tema e descri√ß√£o\n\n`<instituicao>_<tema>_<descri√ß√£o>`\n\nExemplo: Os dados de vota√ß√µes da camara municipal do rio de janeiro estariam em `br-rj-riodejaneiro` e tabela `dcmrj-legislativo-legislativo`\n\n## Tabela de Temas e Identificadores\n\nA referencia dos temas √© da busca da Base dos Dados, mas temas podem ser adicionados e trocados. Identificadores ser√£o adicionados de acordo com demanda.\n| Tema                                     | Identificador    |\n|------------------------------------------|------------------|\n| Agropecu√°ria                             | agropecuaria     |\n| Ci√™ncia, Tecnologia e Inova√ß√£o           | ciencia_tec_inov |\n| Cultura e Arte                           | cultura_arte     |\n| Diversidade e Inclus√£o                   | diversidade      |\n| Educa√ß√£o                                 | educacao         |\n| Energia                                  | energia          |\n| Esportes                                 | esportes         |\n| Economia                                 | economia         |\n| Governo e Finan√ßas P√∫blicas              | governo          |\n| Hist√≥ria                                 | historia         |\n| Infraestrutura e Transportes             | infr_transp      |\n| Jornalismo e Comunica√ß√£o                 | jornalismo       |\n| Meio Ambiente                            | meio_ambiente    |\n| Justi√ßa                                  | justica          |\n| Organiza√ß√£o Territorial                  | territorio       |\n| Pol√≠tica                                 | politica         |\n| Popula√ß√£o                                | populacao        |\n| Religi√£o                                 | religiao         |\n| Seguran√ßa, Crime, Viol√™ncia e Conflito   | seguranca        |\n| Sa√∫de                                    | saude            |\n| Turismo                                  | turismo          |\n| Urbaniza√ß√£o                              | urbanizacao      |\n\n# Estrutura do Github\n\nA pasta `bases/` ter√° uma estrutura similar a do BigQuery.\n\n```\n    ‚îú‚îÄ‚îÄ bases\n        ‚îú‚îÄ‚îÄ <nome_dataset>             Ex: br_eleicoes_tse\n        ‚îú‚îÄ‚îÄ ...\n            ‚îú‚îÄ‚îÄ code/                 Todo c√≥digo relacionado ao dataset\n            ‚îú‚îÄ‚îÄ <dataset_config.yaml>\n            ‚îú‚îÄ‚îÄ <nome_tabela>.yaml    Ex: candidatos.yaml\n            ‚îú‚îÄ‚îÄ ...\n```\n\nOs arquivos `.yaml` ser√£o usados para documenta√ß√£o e configura√ß√£o das tabelas e datasets.\n\n### dataset_config.yaml\n\n```yaml\nname: br_politica_tse\ndescription: |\n    Dados do Tribunal Superior Eleitoral dispon√≠veis na url ...\nlabels: \n    - eleicao\n    - candidatos\n```\n\n### <nome_tabela>.yaml\n\n```yaml\nowner: \n    name: Base dos Dados # Ou qualquer outra institui√ß√£o/ pessoa\n    contact: bdd-issues\ncode: <code-that-generated-table-url>\nname: eleicao_candidatos\ndescription: |\n    Candidatos das elei√ß√µes federais e municipais de 2010 at√© 2020\n\n    Tratamentos:\n     - ...\nlabels:\n    - eleicao\n    - candidatos\ncolumns:\n    ANO:\n        description: asdfsfasf\n        type: INTEGER\n        treated?: False # A coluna foi modificada (exceto mudan√ß√£ de tipos)?\n    NOME:\n        description: asdfsfasf\n        type: STRING\n        treated?: False # A coluna foi modificada (exceto mudan√ß√£ de tipos)?\n```\n\n# Estrutura no Storage\n\nA estrutura deve seguir a mesma l√≥gica do BigQuery. Por√©m, existem pastas ra√≠zes diferentes: os dados brutos devem ser alocados em `raw` e prontos em `ready`. Ambas possuem a mesma estrutura:\n\n```\n    ‚îú‚îÄ‚îÄ ready|raw\n        ‚îú‚îÄ‚îÄ <nome_dataset>        Ex: br_politica_tse\n        ‚îú‚îÄ‚îÄ ...\n            ‚îú‚îÄ‚îÄ <nome_tabela>    Ex: eleicao_candidatos\n            ‚îú‚îÄ‚îÄ ...\n                ‚îú‚îÄ‚îÄ <dados>      Dados particionados ou n√£o.\n```\n\nNem todos os dados necessitam estar na pasta `raw`. Essa pasta existe somente para aqueles que precisam de um processamento pr√©vio. \n\n# Tratamento no Bigquery\n\nO BigQuery √© uma √≥tima ferramenta para tratar as bases. Portanto, recomenda-se\nque subir os dados brutos e usar uma query para trat√°-los. Seja para corrigir tipos\nou adicionar colunas √∫teis.\n\nPara isso, dever√° ser criado uma dataset com o mesmo nome, mas precedido de `raw_`.\n\nExemplo: `raw_br_politica_tse`\n\nE todas as tabelas desse dataset ser√£o consideradas brutas e n√£o dever√£o ser abertas\nao p√∫blico.\n\n# Regras de Tratamento das Bases\n\n- Nunca editar os valores da base. Se for o caso de tratar uma coluna, adicionar uma nova coluna com os dados tratados.\n\n- Os tipos do BigQuery devem ser usados apropriadamente.\n\n- C√≥digos dos Munic√≠pios e Estados brasileiros devem seguir o padr√£o do IBGE.\n\n- N√£o normalizar campos de texto usando ma√≠usculas.\n\n- O c√≥digo para reproduzir o tratamento deve ser aberto.\n\n- Valores nulos devem ser convertidos para `None`.\n\n# Idiomas\n\nToda documenta√ß√£o estar√° em portugu√™s (quando poss√≠vel). O c√≥digo e configura√ß√µes estar√° em ingl√™s.\n',
    'author': 'Joao Carabetta',
    'author_email': 'joao.carabetta@gmail.com',
    'maintainer': None,
    'maintainer_email': None,
    'url': 'https://github.com/base-dos-dados/bases',
    'packages': packages,
    'package_data': package_data,
    'install_requires': install_requires,
    'entry_points': entry_points,
    'python_requires': '>=3.6,<4.0',
}


setup(**setup_kwargs)

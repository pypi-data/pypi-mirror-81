import os
from pybuild import Pybuild1, InstallDir
from pybuild.modinfo import M


class Mod(Pybuild1):
    NAME = "Test"
    KEYWORDS = "test"
    DESC = "test desc"
    HOMEPAGE = "test homepage"
    IUSE = "foo bar baz"
    REQUIRED_USE = """
        foo? ( bar )
        ?? ( bar baz )
    """
    RDEPEND = """
        foo? ( test/test )
        bar? ( test/test3 )
        baz? ( test/test5 )
    """
    INSTALL_DIRS = [InstallDir(".")]

    def src_prepare(self):
        os.makedirs(M)
        with open(os.path.join(M, "foo.txt"), "w") as file:
            print("foo", file=file)

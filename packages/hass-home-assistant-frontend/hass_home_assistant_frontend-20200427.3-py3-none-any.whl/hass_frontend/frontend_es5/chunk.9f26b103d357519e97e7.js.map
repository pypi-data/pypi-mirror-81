{"version":3,"sources":["webpack:///./src/common/util/parse-aspect-ratio.ts","webpack:///./src/panels/lovelace/cards/hui-iframe-card.ts"],"names":["__webpack_require__","d","__webpack_exports__","parseAspectRatio","parseOrThrow","num","parsed","parseFloat","isNaN","Error","concat","input","endsWith","w","h","substr","length","arr","replace","split","err","HuiIframeCard","_decorate","customElement","_initialize","_LitElement","F","_LitElement2","_inherits","_super","_createSuper","_this","_classCallCheck","this","_len","arguments","args","Array","_key","call","apply","_assertThisInitialized","kind","static","key","value","_getConfigElement","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","Promise","all","e","then","bind","abrupt","document","createElement","stop","type","url","aspect_ratio","decorators","property","Boolean","reflect","_config","Number","config","html","_templateObject","padding","isPanel","ratio","toFixed","_templateObject2","title","styleMap","padding-top","css","_templateObject3","LitElement"],"mappings":"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","file":"chunk.9f26b103d357519e97e7.js","sourcesContent":["// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nconst parseOrThrow = (num) => {\n  const parsed = parseFloat(num);\n  if (isNaN(parsed)) {\n    throw new Error(`${num} is not a number`);\n  }\n  return parsed;\n};\n\nexport default function parseAspectRatio(input: string) {\n  if (!input) {\n    return null;\n  }\n  try {\n    if (input.endsWith(\"%\")) {\n      return { w: 100, h: parseOrThrow(input.substr(0, input.length - 1)) };\n    }\n\n    const arr = input.replace(\":\", \"x\").split(\"x\");\n    if (arr.length === 0) {\n      return null;\n    }\n\n    return arr.length === 1\n      ? { w: parseOrThrow(arr[0]), h: 1 }\n      : { w: parseOrThrow(arr[0]), h: parseOrThrow(arr[1]) };\n  } catch (err) {\n    // Ignore the error\n  }\n  return null;\n}\n","import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport parseAspectRatio from \"../../../common/util/parse-aspect-ratio\";\nimport \"../../../components/ha-card\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { IframeCardConfig } from \"./types\";\n\n@customElement(\"hui-iframe-card\")\nexport class HuiIframeCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(\n      /* webpackChunkName: \"hui-iframe-card-editor\" */ \"../editor/config-elements/hui-iframe-card-editor\"\n    );\n    return document.createElement(\"hui-iframe-card-editor\");\n  }\n\n  public static getStubConfig(): IframeCardConfig {\n    return {\n      type: \"iframe\",\n      url: \"https://www.home-assistant.io\",\n      aspect_ratio: \"50%\",\n    };\n  }\n\n  @property({ type: Boolean, reflect: true })\n  public isPanel = false;\n\n  @property({ type: Boolean, reflect: true })\n  public editMode = false;\n\n  @property() protected _config?: IframeCardConfig;\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 3;\n    }\n    const aspectRatio = this._config.aspect_ratio\n      ? Number(this._config.aspect_ratio.replace(\"%\", \"\"))\n      : 50;\n    return 1 + aspectRatio / 25;\n  }\n\n  public setConfig(config: IframeCardConfig): void {\n    if (!config.url) {\n      throw new Error(\"URL required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult {\n    if (!this._config) {\n      return html``;\n    }\n\n    let padding = \"\";\n    if (!this.isPanel && this._config.aspect_ratio) {\n      const ratio = parseAspectRatio(this._config.aspect_ratio);\n      if (ratio && ratio.w > 0 && ratio.h > 0) {\n        padding = `${((100 * ratio.h) / ratio.w).toFixed(2)}%`;\n      }\n    } else if (!this.isPanel) {\n      padding = \"50%\";\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div\n          id=\"root\"\n          style=\"${styleMap({\n            \"padding-top\": padding,\n          })}\"\n        >\n          <iframe\n            src=\"${this._config.url}\"\n            sandbox=\"allow-forms allow-modals allow-popups allow-pointer-lock allow-same-origin allow-scripts\"\n            allowfullscreen=\"true\"\n          ></iframe>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host([ispanel]) ha-card {\n        width: 100%;\n        height: 100%;\n      }\n\n      :host([ispanel][editMode]) ha-card {\n        height: calc(100% - 51px);\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n\n      #root {\n        width: 100%;\n        position: relative;\n      }\n\n      :host([ispanel]) #root {\n        height: 100%;\n      }\n\n      iframe {\n        position: absolute;\n        border: none;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-iframe-card\": HuiIframeCard;\n  }\n}\n"],"sourceRoot":""}